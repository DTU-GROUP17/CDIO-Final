<div class="container-fluid">
    <div class="row">
        <div class="col-lg-12">
            <h1 class="page-header">Materials</h1>
        </div>
        <!-- /.col-lg-12 -->
    </div>
    <!-- /.row -->
</div>
<!-- /.container-fluid -->


<!--

<table id="myTableMaterials" class="table table-hover" cellspacing="0" width="100%">
<thead>
<tr>
    <th>ID</th>
    <th>Component ID</th>
    <th>Supplier ID</th>
    <th>Stocked</th>
    <th>used</th>
    <th>Created At</th>
    <th>Created By</th>
</tr>
</thead>
<tfoot>
<tr>
    <th>ID</th>
    <th>Component ID</th>
    <th>Supplier ID</th>
    <th>Stocked</th>
    <th>used</th>
    <th>Created At</th>
    <th>Created By</th>
</tr>
</tfoot>
<tbody>
<tr>
    <td>1</td>
    <td>123</td>
    <td>413</td>
    <td>234</td>
    <td>123</td>
    <td>yesterday</td>
    <td>frækfyr69</td>
</tr>
<tr>
    <td>1</td>
    <td>123</td>
    <td>413</td>
    <td>234</td>
    <td>123</td>
    <td>yesterday</td>
    <td>frækfyr69</td>
</tr>
<tr>
    <td>1</td>
    <td>123</td>
    <td>413</td>
    <td>234</td>
    <td>123</td>
    <td>yesterday</td>
    <td>frækfyr69</td>
</tr>

</tbody>

</table>
-->



<!-- Testing of jTable -->

<div id="table_materials"></div>












<script>
    $(function(){
        let table = $("#table_materials");

        table.jtable({
            fields : {
                id : {
                    title : '#',
                },
                stocked : {
                    title : "stocked"
                },
                used : {
                    title : "used"
                },
                created_at : {
                    title : "created at"
                },
                component_id : {
                    title : "component id"
                },
                supplier_id : {
                    title : "supplier id"
                },
                created_by : {
                    title : "created by"
                }
            },
            div : {
                errorDialog : $('#failed')
            },
            actions : {
                listAction : function () {
                    return new Promise((resolve, reject) => {
                        Materials.all()
                            .then((materials) => {
                                let records = [];
                                materials.forEach(function (material){
                                    records.push({
                                        id : material.id,
                                        stocked : material.stocked ,
                                        used : material.used,
                                        created_at : material.created_at,
                                        component_id : material.component_id,
                                        supplier_id : material.supplier_id,
                                        created_by : material.created_by
                                    })
                                });

                                resolve({
                                    Result : "OK",
                                    TotalRecordCount : materials.length,
                                    Records : records
                                });
                            })
                            .catch(() => {
                                reject('Failed fetching the users...');
                            })
                    });
                }
            }
        });
        table.jtable('load');

    });
</script>




<!-- Include one of jTable styles. -->
<!--<link href="jtable_metro_base.min.css" rel="stylesheet" type="text/css"/>
<link href="jtable_jqueryui.min.css" rel="stylesheet" type="text/css"/> -->
<!-- Include jTable script file. -->
<!--<script src="jquery.jtable.min.js" type="text/javascript"></script>-->
<!-- Include custom made script file -->
<script src="../js/Material.js"></script>